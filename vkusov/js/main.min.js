/* ======= Main JS START ======= */
(function () {
  // GLOBALS
  let html = document.querySelector('html');
  let body = document.querySelector('body');

  /* ======= header START ======= */
  if (document.querySelector('header')) {
    /* ======= canvi navbar START ======= */
    var canviNavbar = new Canvi({
      content: '.canvi-content',
      navbar: '.canvi-navbar',
      openButton: '.canvi-open-button',
      position: 'left',
      pushContent: false,
      width: '100%',
    });

    const canviOpenButton = document.querySelector('.canvi-open-button');
    canviOpenButton.addEventListener('click', function (event) {
      html.classList.add('is-static');
      body.classList.add('is-static');
    });

    const canviContent = document.querySelector('.canvi-content');
    const canviCloseButton = document.querySelector('.canvi-close-button');
    canviCloseButton.addEventListener('click', function (event) {
      html.classList.remove('is-static');
      body.classList.remove('is-static');
      canviContent.classList.add('elem-transform-none'); // Для сброса размытия видеофона в режиме параллакса после открытия canvi nav
      canviNavbar.close();
    });
    /* ======= canvi navbar END ======= */

    /* ======= Headhesive START ======= */
    // Set options
    var options = {
      offset: 80,
      offsetSide: 'top',
      classes: {
        clone: 'header--clone',
        stick: 'header--stick',
        unstick: 'header--unstick'
      }
    };

    // Initialise with options
    var header = new Headhesive('.header', options);

    // Headhesive destroy
    // header.destroy();

    /* ======= canvi headhesive navbar START ======= */
    var canviHeadhesiveNavbar = new Canvi({
      content: '.canvi-content',
      navbar: '.canvi-navbar',
      openButton: '.canvi-open-button',
      position: 'left',
      pushContent: false,
      width: '100%',
    });

    
    const canviHeadhesiveOpenButton = document.querySelector('.canvi-open-button');
    canviHeadhesiveOpenButton.addEventListener('click', function (event) {
      html.classList.add('is-static');
      body.classList.add('is-static');
    });
    
    const canviHeadhesiveCloseButton = document.querySelector('.canvi-close-button');
    canviHeadhesiveCloseButton.addEventListener('click', function (event) {
      html.classList.remove('is-static');
      body.classList.remove('is-static');
      canviContent.classList.add('elem-transform-none'); // Для сброса размытия видеофона в режиме параллакса после открытия canvi nav
      canviHeadhesiveNavbar.close();
    });
    /* ======= canvi headhesive navbar END ======= */
    /* ======= Headhesive END ======= */

  }
  /* ======= header END ======= */

  /* ======= products START ======= */
  if (document.querySelector('.products')) {

    /* ======= swiper START ======= */
    const productsSwiper = new Swiper('.products__swiper', {
      // Default parameters
      direction: 'horizontal',
      loop: true,
      speed: 500,
      slidesPerView: 3,
      breakpoints: {
        // when window width is >= 0px
        0: {
          slidesPerView: 1,
        },
        // when window width is >= 768px
        768: {
          slidesPerView: 2,
        },
        // when window width is >= 992px
        992: {
          slidesPerView: 3,
        },
      },
      navigation: {
        nextEl: '.products__swiper-button-next',
        prevEl: '.products__swiper-button-prev',
      },
    });
    /* ======= swiper END ======= */

  }
  /* ======= products END ======= */
  
  /* ======= love-in-fish START ======= */
  if (document.querySelector('.love-in-fish')) {
    /* ======= show slogan START ======= */
    let showSlogan = function() {
      setTimeout(function() {
        let $__loveInFishSlogan = document.querySelector('.love-in-fish__slogan');
      
        if (!$__loveInFishSlogan.classList.contains('love-in-fish__slogan--visible')) {
          $__loveInFishSlogan.classList.add('love-in-fish__slogan--visible');
        }
      }, 3000)
    };
    
    document.addEventListener('DOMContentLoaded', showSlogan());
    /* ======= show slogan END ======= */
    
    /* ======= parallax START ======= */
    let $__loveInFishParallax = document.getElementsByClassName('love-in-fish__video-bg--parallax');
    new simpleParallax($__loveInFishParallax, {
      delay: 0.6,
      scale: 1.4,
      transition: 'cubic-bezier(0,0,0,1)',
    });
    /* ======= parallax END ======= */
  }
  /* ======= love-in-fish END ======= */

})();
/* ======= Main JS END ======= */